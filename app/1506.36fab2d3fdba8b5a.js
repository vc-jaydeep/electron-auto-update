"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1506],{1506:(tt,C,a)=>{a.r(C),a.d(C,{LoginPage:()=>X});var Z=a(5861),f=a(4755),r=a(9401),v=a(5514),O=a(6852),c=a(6787),A=a(4392),T=a(9090),x=a(2340),l=a(603),w=a(8746),t=a(2504),b=a(9891),y=a(4487),U=a(263),k=a(3117),I=a(146),S=a(5665);function D(e,s){1&e&&t.GkF(0)}function N(e,s){1&e&&t.GkF(0)}function K(e,s){1&e&&t.GkF(0)}const M=function(e){return{control:e,message:"Email is required!"}},L=function(e){return{control:e,message:"Please enter valid email!"}},h=function(e){return{hidden:e}},E=function(e){return{control:e,message:"Password is required!"}},V=function(){return["/pos/forgot-password"]};function q(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"form",8),t.NdJ("keyup.enter",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.onSubmit("login"))})("ngSubmit",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.onSubmit("login"))}),t.TgZ(1,"ion-card",9)(2,"ion-card-header")(3,"ion-card-title",10),t._uU(4,"Login Account"),t.qZA()(),t.TgZ(5,"ion-card-content")(6,"ion-item",11),t._UZ(7,"ion-icon",12)(8,"ion-input",13),t.qZA(),t.YNc(9,D,1,0,"ng-container",14),t.YNc(10,N,1,0,"ng-container",14),t.TgZ(11,"ion-item",11),t._UZ(12,"ion-icon",15)(13,"ion-input",16),t.TgZ(14,"ion-icon",17),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.showHide("password"))}),t.qZA()(),t.YNc(15,K,1,0,"ng-container",14),t.qZA(),t.TgZ(16,"div",18)(17,"a",19),t._uU(18,"Forgot Password? "),t.qZA()(),t.TgZ(19,"div",20)(20,"ion-button",21),t._uU(21,"Login"),t.qZA()(),t.TgZ(22,"div",22)(23,"span"),t._uU(24,"Account is not activated?"),t.qZA(),t.TgZ(25,"a",23),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.activationPopup="verification")}),t._uU(26," Activate your account "),t.qZA()(),t.TgZ(27,"p",24),t._uU(28,"Powered by EveryTicket"),t.qZA()()()}if(2&e){const n=t.oxw(),i=t.MAs(20),o=t.MAs(22);t.Q6J("formGroup",n.userLoginForm),t.xp6(9),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(10,M,n.userLoginFormErrorControl.email)),t.xp6(1),t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",t.VKq(12,L,n.userLoginFormErrorControl.email)),t.xp6(3),t.Q6J("type",n.isPasswordVisible?"password":"text"),t.xp6(1),t.Q6J("ngClass",t.VKq(14,h,n.isPasswordVisible)),t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(16,E,n.userLoginFormErrorControl.password)),t.xp6(2),t.Q6J("routerLink",t.DdM(18,V))}}function J(e,s){1&e&&t.GkF(0)}function F(e,s){1&e&&t.GkF(0)}function G(e,s){1&e&&t.GkF(0)}const Y=function(e){return{control:e,message:"Activation code is required!"}};function Q(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"form",8),t.NdJ("keyup.enter",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.onSubmit("verification"))})("ngSubmit",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.onSubmit("verification"))}),t.TgZ(1,"ion-card",25)(2,"ion-card-header")(3,"ion-card-title",10),t._uU(4,"Activate Account"),t.qZA()(),t.TgZ(5,"ion-card-content")(6,"ion-item",11),t._UZ(7,"ion-icon",12)(8,"ion-input",13),t.qZA(),t.YNc(9,J,1,0,"ng-container",14),t.YNc(10,F,1,0,"ng-container",14),t.TgZ(11,"ion-item",11),t._UZ(12,"ion-icon",15)(13,"ion-input",26),t.qZA(),t.YNc(14,G,1,0,"ng-container",14),t.qZA(),t.TgZ(15,"div",20)(16,"ion-button",21),t._uU(17,"CONTINUE"),t.qZA()(),t.TgZ(18,"div",22)(19,"span"),t._uU(20,"Account already activated? "),t.qZA(),t.TgZ(21,"a",23),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.activationPopup="login")}),t._uU(22," Log in "),t.qZA()(),t.TgZ(23,"p",24),t._uU(24,"Powered by EveryTicket"),t.qZA()()()}if(2&e){const n=t.oxw(),i=t.MAs(20),o=t.MAs(22);t.Q6J("formGroup",n.accountVerification),t.xp6(9),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(7,M,n.accountVerificationErrorControl.email)),t.xp6(1),t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",t.VKq(9,L,n.accountVerificationErrorControl.email)),t.xp6(4),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(11,Y,n.accountVerificationErrorControl.activation_code))}}function R(e,s){1&e&&t.GkF(0)}function B(e,s){1&e&&(t.TgZ(0,"div",32),t._uU(1," Passwords don't match. "),t.qZA())}function W(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"form",8),t.NdJ("keyup.enter",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.resetPassword())})("ngSubmit",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.resetPassword())}),t.TgZ(1,"ion-card",27)(2,"ion-card-header")(3,"ion-card-title",10),t._uU(4,"Set Password"),t.qZA()(),t.TgZ(5,"ion-card-content")(6,"ion-item",11),t._UZ(7,"ion-icon",15)(8,"ion-input",28),t.TgZ(9,"ion-icon",17),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.showHide("password"))}),t.qZA()(),t.YNc(10,R,1,0,"ng-container",14),t.TgZ(11,"ion-item",11),t._UZ(12,"ion-icon",15)(13,"ion-input",29),t.TgZ(14,"ion-icon",17),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.showHide("confirmPassword"))}),t.qZA()(),t.YNc(15,B,2,0,"div",30),t.qZA(),t.TgZ(16,"div",20)(17,"ion-button",31),t._uU(18,"SET PASSWORD"),t.qZA()(),t.TgZ(19,"div",22)(20,"span"),t._uU(21,"Account already activated? "),t.qZA(),t.TgZ(22,"a",23),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.activationPopup="login")}),t._uU(23," Log in "),t.qZA()(),t.TgZ(24,"p",24),t._uU(25,"Powered by EveryTicket"),t.qZA()()()}if(2&e){const n=t.oxw(),i=t.MAs(20);t.Q6J("formGroup",n.resetPasswordForm),t.xp6(8),t.Q6J("type",n.isPasswordVisible?"password":"text"),t.xp6(1),t.Q6J("ngClass",t.VKq(9,h,n.isPasswordVisible)),t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(11,E,n.resetPasswordFormErrorControl.password)),t.xp6(3),t.Q6J("type",n.isConfirmPasswordShow?"password":"text"),t.xp6(1),t.Q6J("ngClass",t.VKq(13,h,n.isConfirmPasswordShow)),t.xp6(1),t.Q6J("ngIf",(null==n.resetPasswordForm.errors?null:n.resetPasswordForm.errors.mismatch)&&(n.resetPasswordForm.controls.confirm_password.dirty||n.resetPasswordForm.controls.confirm_password.touched)),t.xp6(2),t.Q6J("disabled",n.resetPasswordForm.invalid)}}function H(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"div",32),t._uU(2),t.qZA(),t.BQk()),2&e){const n=t.oxw().message;t.xp6(2),t.hij(" ",n," ")}}function $(e,s){if(1&e&&t.YNc(0,H,3,1,"ng-container",33),2&e){const n=s.control;t.Q6J("ngIf",n.touched&&(null==n.errors?null:n.errors.required))}}function j(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.BQk()),2&e){const n=t.oxw().message;t.xp6(2),t.hij(" ",n," ")}}function z(e,s){if(1&e&&t.YNc(0,j,3,1,"ng-container",33),2&e){const n=s.control;t.Q6J("ngIf",n.touched&&(null==n.errors?null:n.errors.pattern))}}let X=(()=>{class e{constructor(n,i,o,g,_,d,u,m){this.router=n,this.toastService=i,this.loaderService=o,this.authService=g,this.formBuilder=_,this.eventService=d,this.edcService=u,this.encryptDecryptService=m,this.isSubmitted=!1,this.isPasswordVisible=!0,this.isConfirmPasswordShow=!0,this.activationPopup="login",this.projectVersion=x.N.general_const.VERSION,this.edcDeviceList=[],this.config=c.kh,this.userLoginForm=new r.cw({email:new r.NI(null,[r.kI.required,r.kI.email]),password:new r.NI(null,[r.kI.required])}),this.accountVerification=new r.cw({email:new r.NI(null,[r.kI.required,r.kI.email]),activation_code:new r.NI(null,r.kI.required)}),this.resetPasswordForm=this.formBuilder.group({password:["",[r.kI.required,r.kI.minLength(6)]],confirm_password:["",[r.kI.required,r.kI.minLength(6)]]},{validators:[this.passwordMatchValidator]})}get userLoginFormErrorControl(){return this.userLoginForm.controls}get accountVerificationErrorControl(){return this.accountVerification.controls}get resetPasswordFormErrorControl(){return this.resetPasswordForm.controls}passwordMatchValidator(n){var i,o;return(null===(i=n.controls[c.U_.password])||void 0===i?void 0:i.value)===(null===(o=n.controls[c.U_.confirmPassword])||void 0===o?void 0:o.value)?null:{mismatch:!0}}ngOnInit(){this.encryptDecryptService.getDecryptedLocalStorage(O.Bp.ACTIVATION_TOKEN)&&(this.activationPopup="resetPassword")}onSubmit(n){var i,o,g,_,d,u,m;let p,P;this.isSubmitted=!0,n===c.Gr.login?(P=this.userLoginForm,p=this.trimValue(P,n)):(P=this.accountVerification,p=this.trimValue(this.accountVerification,n)),null!==(i=P)&&void 0!==i&&i.valid&&null!==(o=p)&&void 0!==o&&null!==(g=o.email)&&void 0!==g&&g.length&&(null!==(_=p)&&void 0!==_&&null!==(d=_.password)&&void 0!==d&&d.length||null!==(u=p)&&void 0!==u&&null!==(m=u.activation_code)&&void 0!==m&&m.length)&&this.userOperation(p,n)}userOperation(n,i){this.loaderService.showLoader(),this.authService.userLogin(n).pipe((0,w.x)(()=>this.loaderService.hideLoader())).subscribe({next:o=>{this.isSubmitted=!1,this.toastService.presentToast(c.Oh.top,o.message,c.aK.success),i===c.Gr.login?(this.eventService.getRequiredEvent(),this.authService.userTokenSubject.next(o.data.access_token),this.router.navigate(["/pos/home"])):this.activationPopup="resetPassword"},error:o=>{this.isSubmitted=!1,this.toastService.presentToast(c.Oh.top,null==o?void 0:o.message,c.aK.danger)}})}trimValue(n,i){var o,g,_,d;const u=i===c.Gr.login?c.U_.password:c.U_.activationCode;return null===(o=n.controls[c.U_.email])||void 0===o||o.setValue(null==n||null===(g=n.value[c.U_.email])||void 0===g?void 0:g.trim()),null===(_=n.controls[u])||void 0===_||_.setValue(null==n||null===(d=n.value[u])||void 0===d?void 0:d.trim()),null==n?void 0:n.value}resetPassword(){var n;if(this.isSubmitted=!0,null!==(n=this.resetPasswordForm)&&void 0!==n&&n.valid){var i,o;this.loaderService.showLoader();let g={password:null===(i=this.resetPasswordForm)||void 0===i||null===(o=i.controls[c.U_.confirmPassword])||void 0===o?void 0:o.value};this.authService.resetPassword(g).pipe((0,w.x)(()=>this.loaderService.hideLoader())).subscribe({next:()=>{this.toastService.presentToast(c.Oh.top,A.Y.passwordUpdate,c.aK.success),this.isSubmitted=!1,this.activationPopup="login",this.encryptDecryptService.removeEncryptedLocalStorage(O.Bp.ACTIVATION_TOKEN)},error:_=>{this.isSubmitted=!1,this.toastService.presentToast(c.Oh.top,null==_?void 0:_.message,c.aK.danger,6e3)}})}}showHide(n){n===c.U_.password?this.isPasswordVisible=!this.isPasswordVisible:this.isConfirmPasswordShow=!this.isConfirmPasswordShow}goToLink(n){return(0,Z.Z)(function*(){const i=x.N.general_const.FRONTEND_URL,o=n===c.kh.PRIVACY_POLICY?`${i}/${T.Z.PrivacyPolicy}`:`${i}/${T.Z.termsAndConditions}`;window.require("electron").shell.openExternal(o)})()}getEdcDeviceList(){this.edcService.edcDeviceList$.subscribe(n=>{n&&n[0]&&(this.edcDeviceList=n)})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v.F0),t.Y36(b.k),t.Y36(y.D),t.Y36(U.e),t.Y36(r.qu),t.Y36(k.P),t.Y36(I.b),t.Y36(S.q))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],standalone:!0,features:[t.jDz],decls:23,vars:4,consts:[[1,"main-list","form-box"],["fetchPriority","high","src","assets/images/white-logo.svg","width","130"],["autocomplete","off",3,"formGroup","keyup.enter","ngSubmit",4,"ngIf"],[1,"footer"],[1,"cursor-pointer",3,"click"],[1,"version"],["requiredError",""],["patternError",""],["autocomplete","off",3,"formGroup","keyup.enter","ngSubmit"],[1,"login-card"],[1,"login-title","font-16","font-medium"],["lines","none"],["name","mail-outline"],["placeholder","Email","type","email","formControlName","email"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["name","finger-print-outline"],["placeholder","Password","formControlName","password",3,"type"],["name","eye","item-right","",1,"password-hide",3,"ngClass","click"],[1,"forgot-password"],[3,"routerLink"],[1,"center-btn"],["type","submit",1,"mb-10"],[1,"w-100","mt-15","text-center","mb-15"],[1,"font-bold","text-blue","cursor-pointer",3,"click"],[1,"footer-info","powered-by","mt-10"],[1,"login-card","activation-card"],["placeholder","Activation Code","formControlName","activation_code"],[1,"login-card","password-card"],["placeholder","Password*","formControlName","password",3,"type"],["placeholder","Confirm Password*","formControlName","confirm_password",3,"type"],["class","error",4,"ngIf"],["type","submit",1,"mb-10",3,"disabled"],[1,"error"],[4,"ngIf"]],template:function(n,i){1&n&&(t._UZ(0,"ion-header"),t.TgZ(1,"ion-content")(2,"div",0),t._UZ(3,"img",1),t.YNc(4,q,29,19,"form",2),t.YNc(5,Q,25,13,"form",2),t.YNc(6,W,26,15,"form",2),t.TgZ(7,"div",3)(8,"ul")(9,"li")(10,"a",4),t.NdJ("click",function(){return i.goToLink(i.config.PRIVACY_POLICY)}),t._uU(11,"Privacy Policy "),t.qZA()(),t.TgZ(12,"li")(13,"a",4),t.NdJ("click",function(){return i.goToLink(i.config.TERMS_AND_CONDITION)}),t._uU(14,"Term & Condition "),t.qZA()()(),t.TgZ(15,"p"),t._uU(16,"\xa9 2023 EveryTicket CC Ltd, All rights reserved."),t.qZA(),t.TgZ(17,"p",5),t._uU(18),t.qZA()()(),t.YNc(19,$,1,1,"ng-template",null,6,t.W1O),t.YNc(21,z,1,1,"ng-template",null,7,t.W1O),t.qZA()),2&n&&(t.xp6(4),t.Q6J("ngIf","login"===i.activationPopup),t.xp6(1),t.Q6J("ngIf","verification"===i.activationPopup),t.xp6(1),t.Q6J("ngIf","resetPassword"===i.activationPopup),t.xp6(12),t.hij("Ver. V",i.projectVersion,""))},dependencies:[f.ez,f.mk,f.O5,f.tP,l.Pc,l.YG,l.PM,l.FN,l.Zi,l.Dq,l.W2,l.Gu,l.gu,l.pK,l.Ie,l.j9,l.Fo,v.Bz,v.rH,r.UX,r._Y,r.JJ,r.JL,r.sg,r.u],styles:['.main-list[_ngcontent-%COMP%]{justify-content:center;align-items:center;height:100vh;display:flex;flex-wrap:wrap;flex-direction:column;padding:0 15px;background:url(login-page.b4c082d91635ff76.png) center center/cover no-repeat}.main-list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:35px;width:180px}.login-card[_ngcontent-%COMP%]{margin-bottom:50px;box-shadow:0 2px 16px rgba(0,0,0,.5);width:100%;background:#222323;padding:30px;border:1px solid #666666;border-radius:5px}.login-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:0;background:#222323;margin:25px 0;border-radius:5px}.login-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:15px;padding:0 18px;border-radius:10px;background:#292c2d}.login-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{color:#fff}.login-card[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{color:#fff}.login-card[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{color:var(--ion-color-footer-text)}.login-card[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-footer-text);padding:0 10px 0 0;font-size:1rem}.login-card[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon.password-hide[_ngcontent-%COMP%]{cursor:pointer;padding:0}.login-card[_ngcontent-%COMP%]   .center-btn[_ngcontent-%COMP%]{text-align:center;padding:0}.login-card[_ngcontent-%COMP%]   .center-btn[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%}.login-card[_ngcontent-%COMP%]   .center-btn[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]::part(native){width:100%;border-radius:25px;padding:10px 0;background:var(--ion-color-primary);color:#fff;font-size:1rem;font-weight:600}.login-card[_ngcontent-%COMP%]   .footer-info[_ngcontent-%COMP%]{text-align:center}.footer[_ngcontent-%COMP%]{width:100%;text-align:center;position:absolute;bottom:0;left:0;display:flex;align-items:center;justify-content:space-between;padding:15px}.footer[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0;text-align:center}.footer[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;padding:0 5px}.footer[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:rgba(255,255,255,.4);font-size:.9rem}.footer[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:rgba(255,255,255,.4);font-size:.9rem}.powered-by[_ngcontent-%COMP%]{font-size:.8rem}.password-hide.hidden[_ngcontent-%COMP%]{position:relative}.password-hide.hidden[_ngcontent-%COMP%]:after{content:"";height:0;width:25px;top:5px;left:-1.5px;border-top:2px solid rgba(255,255,255,.4);transform:rotate(145deg);position:absolute}.form-box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{min-width:395px}ion-select.edc-select-dropdown[_ngcontent-%COMP%]   .select-icon[_ngcontent-%COMP%]{opacity:1}.edc-select-dropdown[_ngcontent-%COMP%]{color:#fff;width:100%}ion-select.edc-select-dropdown[_ngcontent-%COMP%]   .select-icon-inner[_ngcontent-%COMP%]{color:#fff}.forgot-password[_ngcontent-%COMP%]{margin-bottom:10px;text-align:end;margin-top:-2px}']}),e})()}}]);