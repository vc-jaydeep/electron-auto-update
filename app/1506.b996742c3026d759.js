"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1506],{1506:(nt,O,a)=>{a.r(O),a.d(O,{LoginPage:()=>ot});var Z=a(5861),f=a(4755),c=a(9401),v=a(5514),A=a(3951),T=a(6852),r=a(6787),b=a(4392),h=a(9090),x=a(2340),g=a(603),M=a(8746),t=a(2504),y=a(9891),U=a(4487),D=a(263),I=a(3117),S=a(146),k=a(5665),N=a(3254);function K(e,s){1&e&&t.GkF(0)}function V(e,s){1&e&&t.GkF(0)}function q(e,s){1&e&&t.GkF(0)}const w=function(e){return{control:e,message:"Email is required!"}},E=function(e){return{control:e,message:"Please enter valid email!"}},C=function(e){return{hidden:e}},L=function(e){return{control:e,message:"Password is required!"}},J=function(){return["/pos/forgot-password"]};function F(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"form",8),t.NdJ("keyup.enter",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.onSubmit("login"))})("ngSubmit",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.onSubmit("login"))}),t.TgZ(1,"ion-card",9)(2,"ion-card-header")(3,"ion-card-title",10),t._uU(4,"Login Account"),t.qZA()(),t.TgZ(5,"ion-card-content")(6,"ion-item",11),t._UZ(7,"ion-icon",12)(8,"ion-input",13),t.qZA(),t.YNc(9,K,1,0,"ng-container",14),t.YNc(10,V,1,0,"ng-container",14),t.TgZ(11,"ion-item",11),t._UZ(12,"ion-icon",15)(13,"ion-input",16),t.TgZ(14,"ion-icon",17),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.showHide("password"))}),t.qZA()(),t.YNc(15,q,1,0,"ng-container",14),t.qZA(),t.TgZ(16,"div",18)(17,"a",19),t._uU(18,"Forgot Password? "),t.qZA()(),t.TgZ(19,"div",20)(20,"ion-button",21),t._uU(21,"Login"),t.qZA()(),t.TgZ(22,"div",22)(23,"span"),t._uU(24,"Account is not activated?"),t.qZA(),t.TgZ(25,"a",23),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.activationPopup="verification")}),t._uU(26," Activate your account "),t.qZA()(),t.TgZ(27,"p",24),t._uU(28,"Powered by EveryTicket"),t.qZA()()()}if(2&e){const o=t.oxw(),i=t.MAs(20),n=t.MAs(22);t.Q6J("formGroup",o.userLoginForm),t.xp6(9),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(10,w,o.userLoginFormErrorControl.email)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(12,E,o.userLoginFormErrorControl.email)),t.xp6(3),t.Q6J("type",o.isPasswordVisible?"password":"text"),t.xp6(1),t.Q6J("ngClass",t.VKq(14,C,o.isPasswordVisible)),t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(16,L,o.userLoginFormErrorControl.password)),t.xp6(2),t.Q6J("routerLink",t.DdM(18,J))}}function Y(e,s){1&e&&t.GkF(0)}function G(e,s){1&e&&t.GkF(0)}function R(e,s){1&e&&t.GkF(0)}const B=function(e){return{control:e,message:"Activation code is required!"}};function Q(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"form",8),t.NdJ("keyup.enter",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.onSubmit("verification"))})("ngSubmit",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.onSubmit("verification"))}),t.TgZ(1,"ion-card",25)(2,"ion-card-header")(3,"ion-card-title",10),t._uU(4,"Activate Account"),t.qZA()(),t.TgZ(5,"ion-card-content")(6,"ion-item",11),t._UZ(7,"ion-icon",12)(8,"ion-input",13),t.qZA(),t.YNc(9,Y,1,0,"ng-container",14),t.YNc(10,G,1,0,"ng-container",14),t.TgZ(11,"ion-item",11),t._UZ(12,"ion-icon",15)(13,"ion-input",26),t.qZA(),t.YNc(14,R,1,0,"ng-container",14),t.qZA(),t.TgZ(15,"div",20)(16,"ion-button",21),t._uU(17,"CONTINUE"),t.qZA()(),t.TgZ(18,"div",22)(19,"span"),t._uU(20,"Account already activated? "),t.qZA(),t.TgZ(21,"a",23),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.activationPopup="login")}),t._uU(22," Log in "),t.qZA()(),t.TgZ(23,"p",24),t._uU(24,"Powered by EveryTicket"),t.qZA()()()}if(2&e){const o=t.oxw(),i=t.MAs(20),n=t.MAs(22);t.Q6J("formGroup",o.accountVerification),t.xp6(9),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(7,w,o.accountVerificationErrorControl.email)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(9,E,o.accountVerificationErrorControl.email)),t.xp6(4),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(11,B,o.accountVerificationErrorControl.activation_code))}}function $(e,s){1&e&&t.GkF(0)}function W(e,s){1&e&&(t.TgZ(0,"div",32),t._uU(1," Passwords don't match. "),t.qZA())}function H(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"form",8),t.NdJ("keyup.enter",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.resetPassword())})("ngSubmit",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.resetPassword())}),t.TgZ(1,"ion-card",27)(2,"ion-card-header")(3,"ion-card-title",10),t._uU(4,"Set Password"),t.qZA()(),t.TgZ(5,"ion-card-content")(6,"ion-item",11),t._UZ(7,"ion-icon",15)(8,"ion-input",28),t.TgZ(9,"ion-icon",17),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.showHide("password"))}),t.qZA()(),t.YNc(10,$,1,0,"ng-container",14),t.TgZ(11,"ion-item",11),t._UZ(12,"ion-icon",15)(13,"ion-input",29),t.TgZ(14,"ion-icon",17),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.showHide("confirmPassword"))}),t.qZA()(),t.YNc(15,W,2,0,"div",30),t.qZA(),t.TgZ(16,"div",20)(17,"ion-button",31),t._uU(18,"SET PASSWORD"),t.qZA()(),t.TgZ(19,"div",22)(20,"span"),t._uU(21,"Account already activated? "),t.qZA(),t.TgZ(22,"a",23),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.activationPopup="login")}),t._uU(23," Log in "),t.qZA()(),t.TgZ(24,"p",24),t._uU(25,"Powered by EveryTicket"),t.qZA()()()}if(2&e){const o=t.oxw(),i=t.MAs(20);t.Q6J("formGroup",o.resetPasswordForm),t.xp6(8),t.Q6J("type",o.isPasswordVisible?"password":"text"),t.xp6(1),t.Q6J("ngClass",t.VKq(9,C,o.isPasswordVisible)),t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(11,L,o.resetPasswordFormErrorControl.password)),t.xp6(3),t.Q6J("type",o.isConfirmPasswordShow?"password":"text"),t.xp6(1),t.Q6J("ngClass",t.VKq(13,C,o.isConfirmPasswordShow)),t.xp6(1),t.Q6J("ngIf",(null==o.resetPasswordForm.errors?null:o.resetPasswordForm.errors.mismatch)&&(o.resetPasswordForm.controls.confirm_password.dirty||o.resetPasswordForm.controls.confirm_password.touched)),t.xp6(2),t.Q6J("disabled",o.resetPasswordForm.invalid)}}function j(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"div",32),t._uU(2),t.qZA(),t.BQk()),2&e){const o=t.oxw().message;t.xp6(2),t.hij(" ",o," ")}}function z(e,s){if(1&e&&t.YNc(0,j,3,1,"ng-container",33),2&e){const o=s.control;t.Q6J("ngIf",o.touched&&(null==o.errors?null:o.errors.required))}}function X(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.BQk()),2&e){const o=t.oxw().message;t.xp6(2),t.hij(" ",o," ")}}function tt(e,s){if(1&e&&t.YNc(0,X,3,1,"ng-container",33),2&e){const o=s.control;t.Q6J("ngIf",o.touched&&(null==o.errors?null:o.errors.pattern))}}let ot=(()=>{class e{constructor(o,i,n,l,_,d,u,m,p){this.router=o,this.toastService=i,this.loaderService=n,this.authService=l,this.formBuilder=_,this.eventService=d,this.edcService=u,this.encryptDecryptService=m,this.configurationService=p,this.isSubmitted=!1,this.isPasswordVisible=!0,this.isConfirmPasswordShow=!0,this.activationPopup=r.$o.login,this.projectVersion=x.N.general_const.VERSION,this.edcDeviceList=[],this.config=r.kh,this.userLoginForm=new c.cw({email:new c.NI(null,[c.kI.required,c.kI.email]),password:new c.NI(null,[c.kI.required])}),this.accountVerification=new c.cw({email:new c.NI(null,[c.kI.required,c.kI.email]),activation_code:new c.NI(null,c.kI.required)}),this.resetPasswordForm=this.formBuilder.group({password:["",[c.kI.required,c.kI.minLength(6)]],confirm_password:["",[c.kI.required,c.kI.minLength(6)]]},{validators:[this.passwordMatchValidator]})}get userLoginFormErrorControl(){return this.userLoginForm.controls}get accountVerificationErrorControl(){return this.accountVerification.controls}get resetPasswordFormErrorControl(){return this.resetPasswordForm.controls}passwordMatchValidator(o){var i,n;return(null===(i=o.controls[r.U_.password])||void 0===i?void 0:i.value)===(null===(n=o.controls[r.U_.confirmPassword])||void 0===n?void 0:n.value)?null:{mismatch:!0}}ngOnInit(){this.encryptDecryptService.getDecryptedLocalStorage(T.Bp.ACTIVATION_TOKEN)&&(this.activationPopup=r.$o.resetPassword),this.getConfig()}getConfig(){this.configurationService.configuration$.subscribe(o=>{o&&(this.configData=o)})}onSubmit(o){var i,n,l,_,d,u,m;let p,P;this.isSubmitted=!0,o===r.$o.login?(P=this.userLoginForm,p=this.trimValue(P,o)):(P=this.accountVerification,p=this.trimValue(this.accountVerification,o)),null!==(i=P)&&void 0!==i&&i.valid&&null!==(n=p)&&void 0!==n&&null!==(l=n.email)&&void 0!==l&&l.length&&(null!==(_=p)&&void 0!==_&&null!==(d=_.password)&&void 0!==d&&d.length||null!==(u=p)&&void 0!==u&&null!==(m=u.activation_code)&&void 0!==m&&m.length)&&this.userOperation(p,o)}userOperation(o,i){this.loaderService.showLoader(),this.authService.userLogin(o).pipe((0,M.x)(()=>this.loaderService.hideLoader())).subscribe({next:n=>{this.isSubmitted=!1,this.toastService.presentToast(r.Oh.top,n.message,r.aK.success),i===r.$o.login?(this.eventService.getRequiredEvent(),this.authService.userTokenSubject.next(n.data.access_token),this.router.navigate([h.Z.home])):this.activationPopup=r.$o.resetPassword},error:n=>{this.isSubmitted=!1,this.toastService.presentToast(r.Oh.top,null==n?void 0:n.message,r.aK.danger)}})}trimValue(o,i){var n,l,_,d;const u=i===r.$o.login?r.U_.password:r.U_.activationCode;return null===(n=o.controls[r.U_.email])||void 0===n||n.setValue(null==o||null===(l=o.value[r.U_.email])||void 0===l?void 0:l.trim()),null===(_=o.controls[u])||void 0===_||_.setValue(null==o||null===(d=o.value[u])||void 0===d?void 0:d.trim()),null==o?void 0:o.value}resetPassword(){var o;if(this.isSubmitted=!0,null!==(o=this.resetPasswordForm)&&void 0!==o&&o.valid){var i,n;this.loaderService.showLoader();let l={password:null===(i=this.resetPasswordForm)||void 0===i||null===(n=i.controls[r.U_.confirmPassword])||void 0===n?void 0:n.value};this.authService.resetPassword(l).pipe((0,M.x)(()=>this.loaderService.hideLoader())).subscribe({next:()=>{this.toastService.presentToast(r.Oh.top,b.Y.passwordUpdate,r.aK.success),this.isSubmitted=!1,this.activationPopup=r.$o.login,this.encryptDecryptService.removeEncryptedLocalStorage(T.Bp.ACTIVATION_TOKEN)},error:_=>{this.isSubmitted=!1,this.toastService.presentToast(r.Oh.top,null==_?void 0:_.message,r.aK.danger,6e3)}})}}showHide(o){o===r.U_.password?this.isPasswordVisible=!this.isPasswordVisible:this.isConfirmPasswordShow=!this.isConfirmPasswordShow}goToLink(o){var i=this;return(0,Z.Z)(function*(){const n=x.N.general_const.FRONTEND_URL,l=o===r.kh.PRIVACY_POLICY?`${n}/${h.Z.PrivacyPolicy}`:`${n}/${h.Z.termsAndConditions}`,_=i.configData.is_pos_wired&&window.require("electron").shell;i.configData.is_pos_wired?_.openExternal(l):yield A.A.open({url:l})})()}getEdcDeviceList(){this.edcService.edcDeviceList$.subscribe(o=>{o&&o[0]&&(this.edcDeviceList=o)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(v.F0),t.Y36(y.k),t.Y36(U.D),t.Y36(D.e),t.Y36(c.qu),t.Y36(I.P),t.Y36(S.b),t.Y36(k.q),t.Y36(N.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],standalone:!0,features:[t.jDz],decls:23,vars:4,consts:[[1,"main-list","form-box"],["fetchPriority","high","src","assets/images/white-logo.svg","width","130"],["autocomplete","off",3,"formGroup","keyup.enter","ngSubmit",4,"ngIf"],[1,"footer"],[1,"cursor-pointer",3,"click"],[1,"version"],["requiredError",""],["patternError",""],["autocomplete","off",3,"formGroup","keyup.enter","ngSubmit"],[1,"login-card"],[1,"login-title","font-16","font-medium"],["lines","none"],["name","mail-outline"],["placeholder","Email","type","email","formControlName","email"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["name","finger-print-outline"],["placeholder","Password","formControlName","password",3,"type"],["name","eye","item-right","",1,"password-hide",3,"ngClass","click"],[1,"forgot-password"],[3,"routerLink"],[1,"center-btn"],["type","submit",1,"mb-10"],[1,"w-100","mt-15","text-center","mb-15"],[1,"font-bold","text-blue","cursor-pointer",3,"click"],[1,"footer-info","powered-by","mt-10"],[1,"login-card","activation-card"],["placeholder","Activation Code","formControlName","activation_code"],[1,"login-card","password-card"],["placeholder","Password*","formControlName","password",3,"type"],["placeholder","Confirm Password*","formControlName","confirm_password",3,"type"],["class","error",4,"ngIf"],["type","submit",1,"mb-10",3,"disabled"],[1,"error"],[4,"ngIf"]],template:function(o,i){1&o&&(t._UZ(0,"ion-header"),t.TgZ(1,"ion-content")(2,"div",0),t._UZ(3,"img",1),t.YNc(4,F,29,19,"form",2),t.YNc(5,Q,25,13,"form",2),t.YNc(6,H,26,15,"form",2),t.TgZ(7,"div",3)(8,"ul")(9,"li")(10,"a",4),t.NdJ("click",function(){return i.goToLink(i.config.PRIVACY_POLICY)}),t._uU(11,"Privacy Policy "),t.qZA()(),t.TgZ(12,"li")(13,"a",4),t.NdJ("click",function(){return i.goToLink(i.config.TERMS_AND_CONDITION)}),t._uU(14,"Term & Condition "),t.qZA()()(),t.TgZ(15,"p"),t._uU(16,"\xa9 2023 EveryTicket CC Ltd, All rights reserved."),t.qZA(),t.TgZ(17,"p",5),t._uU(18),t.qZA()()(),t.YNc(19,z,1,1,"ng-template",null,6,t.W1O),t.YNc(21,tt,1,1,"ng-template",null,7,t.W1O),t.qZA()),2&o&&(t.xp6(4),t.Q6J("ngIf","login"===i.activationPopup),t.xp6(1),t.Q6J("ngIf","verification"===i.activationPopup),t.xp6(1),t.Q6J("ngIf","resetPassword"===i.activationPopup),t.xp6(12),t.hij("Ver. V",i.projectVersion,""))},dependencies:[f.ez,f.mk,f.O5,f.tP,g.Pc,g.YG,g.PM,g.FN,g.Zi,g.Dq,g.W2,g.Gu,g.gu,g.pK,g.Ie,g.j9,g.Fo,v.Bz,v.rH,c.UX,c._Y,c.JJ,c.JL,c.sg,c.u],styles:['.main-list[_ngcontent-%COMP%]{justify-content:center;align-items:center;height:100vh;display:flex;flex-wrap:wrap;flex-direction:column;padding:0 15px;background:url(login-page.b4c082d91635ff76.png) center center/cover no-repeat}.main-list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:35px;width:180px}.login-card[_ngcontent-%COMP%]{margin-bottom:50px;box-shadow:0 2px 16px rgba(0,0,0,.5);width:100%;background:#222323;padding:30px;border:1px solid #666666;border-radius:5px}.login-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:0;background:#222323;margin:25px 0;border-radius:5px}.login-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:15px;padding:0 18px;border-radius:10px;background:#292c2d}.login-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{color:#fff}.login-card[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{color:#fff}.login-card[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{color:var(--ion-color-footer-text)}.login-card[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-footer-text);padding:0 10px 0 0;font-size:1rem}.login-card[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon.password-hide[_ngcontent-%COMP%]{cursor:pointer;padding:0}.login-card[_ngcontent-%COMP%]   .center-btn[_ngcontent-%COMP%]{text-align:center;padding:0}.login-card[_ngcontent-%COMP%]   .center-btn[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%}.login-card[_ngcontent-%COMP%]   .center-btn[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]::part(native){width:100%;border-radius:25px;padding:10px 0;background:var(--ion-color-primary);color:#fff;font-size:1rem;font-weight:600}.login-card[_ngcontent-%COMP%]   .footer-info[_ngcontent-%COMP%]{text-align:center}.footer[_ngcontent-%COMP%]{width:100%;text-align:center;position:absolute;bottom:0;left:0;display:flex;align-items:center;justify-content:space-between;padding:15px}.footer[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0;text-align:center}.footer[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;padding:0 5px}.footer[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:rgba(255,255,255,.4);font-size:.9rem}.footer[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:rgba(255,255,255,.4);font-size:.9rem}.powered-by[_ngcontent-%COMP%]{font-size:.8rem}.password-hide.hidden[_ngcontent-%COMP%]{position:relative}.password-hide.hidden[_ngcontent-%COMP%]:after{content:"";height:0;width:25px;top:5px;left:-1.5px;border-top:2px solid rgba(255,255,255,.4);transform:rotate(145deg);position:absolute}.form-box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{min-width:395px}ion-select.edc-select-dropdown[_ngcontent-%COMP%]   .select-icon[_ngcontent-%COMP%]{opacity:1}.edc-select-dropdown[_ngcontent-%COMP%]{color:#fff;width:100%}ion-select.edc-select-dropdown[_ngcontent-%COMP%]   .select-icon-inner[_ngcontent-%COMP%]{color:#fff}.forgot-password[_ngcontent-%COMP%]{margin-bottom:10px;text-align:end;margin-top:-2px}']}),e})()}}]);